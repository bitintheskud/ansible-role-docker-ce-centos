---
# Inspire by digitalocean
# see: https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-on-centos-7

- name: check whether docker-ce has already installed
  yum:
    list: docker
  register: result_yum

- debug:
    var: result_yum

- include: install_docker.yml
  when: result_yum.rc
  static: no


- name: Enable and start docker service
  service:
    name: docker
    enabled: yes
    state: started

# You need to be root to run docker container.
# add the user to docker group which need to run container.

- name: Add users to the docker group
  user:
    name: "{{item}}"
    groups: docker
    append: yes
  with_items: "{{docker_centos_users}}"